{% extends "base.html" %}
{% block content %}
<style>
    #chatBox { flex: 1; overflow-y: auto; padding: 15px; display: flex; flex-direction: column; gap: 10px; }
    .msg { padding: 10px; border-radius: 10px; color: white; max-width: 80%; }
    .sent { align-self: flex-end; background: #f57c00; }
    .received { align-self: flex-start; background: #2b3948; }
    form { padding: 15px; background: #17212b; display: flex; gap: 10px; }
</style>

<div id="chatBox">
    {% for msg in messages %}
        <div class="msg {% if msg.sender_id == current_user.id %}sent{% else %}received{% endif %}">
            <small>{{ msg.sender.username }}</small><br>
            {{ msg.body }}
        </div>
    {% endfor %}
</div>

<form action="{{ url_for('send') }}" method="POST">
    <input type="text" name="message" placeholder="Сообщение..." required autocomplete="off" autofocus style="flex:1; padding:10px; border-radius:5px; border:none;">
    <button type="submit" style="padding:10px 20px; background:#f57c00; border:none; color:white; border-radius:5px;">➤</button>
</form>

<script>
    var cb = document.getElementById("chatBox");
    cb.scrollTop = cb.scrollHeight;
</script>
{% endblock %}
