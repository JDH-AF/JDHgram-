{% extends "base.html" %}
{% block content %}
<style>
    #box { flex: 1; overflow-y: auto; padding: 15px; display: flex; flex-direction: column; gap: 10px; }
    .m { padding: 10px; border-radius: 12px; max-width: 80%; color: #fff; font-size: 0.9rem; }
    .s { align-self: flex-end; background: var(--accent); border-bottom-right-radius: 2px; }
    .r { align-self: flex-start; background: #2b3948; border-bottom-left-radius: 2px; }
    .t { font-size: 0.6rem; opacity: 0.6; text-align: right; margin-top: 5px; }
    form { padding: 15px; background: var(--bg-panel); display: flex; gap: 10px; border-top: 1px solid #000; }
</style>

<div style="padding: 10px; background: var(--bg-panel); font-weight: bold; text-align: center; border-bottom: 1px solid #000">
    # {{ room.code }}
</div>

<div id="box">
    {% for m in messages %}
        <div class="m {% if m.sender_id == current_user.id %}s{% else %}r{% endif %}">
            {{ m.body }}
            <div class="t">{{ m.timestamp.strftime('%H:%M') }}</div>
        </div>
    {% endfor %}
</div>

<form method="POST">
    <input type="text" name="message" placeholder="Сообщение..." required autocomplete="off" autofocus>
    <button type="submit" style="width: auto; padding: 0 20px">➤</button>
</form>

<script>
    var b = document.getElementById("box");
    b.scrollTop = b.scrollHeight;
</script>
{% endblock %}
